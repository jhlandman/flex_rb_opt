<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>C Reducing estimation error | Flexible risk-based portfolio optimisation (Github link)</title>
  <meta name="description" content="Flexible risk-based portfolio optimisation
<a href="https://github.com/jhlandman/flex_rb_opt"><em>(Github link)</em></a>" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="C Reducing estimation error | Flexible risk-based portfolio optimisation (Github link)" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="jhlandman/flex_rb_opt" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="C Reducing estimation error | Flexible risk-based portfolio optimisation (Github link)" />
  
  
  



<meta name="date" content="2020-07-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="portfolio-mathematics.html"/>
<link rel="next" href="references.html"/>
<style type="text/css">
p.abstract{
  text-align: center;
  font-weight: bold;
}
div.abstract{
  margin: auto;
  width: 90%;
}
</style>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About</a></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="genframework.html"><a href="genframework.html"><i class="fa fa-check"></i><b>3</b> A framework for constructing risk-based portfolios</a>
<ul>
<li class="chapter" data-level="3.1" data-path="genframework.html"><a href="genframework.html#mpt"><i class="fa fa-check"></i><b>3.1</b> An overview of modern portfolio theory</a></li>
<li class="chapter" data-level="3.2" data-path="genframework.html"><a href="genframework.html#introducing-risk-based-investing"><i class="fa fa-check"></i><b>3.2</b> Introducing risk-based investing</a></li>
<li class="chapter" data-level="3.3" data-path="genframework.html"><a href="genframework.html#improving-risk-based-portfolios"><i class="fa fa-check"></i><b>3.3</b> Improving risk-based portfolios</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="rbportch.html"><a href="rbportch.html"><i class="fa fa-check"></i><b>4</b> Overview of risk-based portfolios</a>
<ul>
<li class="chapter" data-level="4.1" data-path="rbportch.html"><a href="rbportch.html#risk-based-portfolio-types"><i class="fa fa-check"></i><b>4.1</b> Risk-based portfolio types</a></li>
<li class="chapter" data-level="4.2" data-path="rbportch.html"><a href="rbportch.html#risk-based-portfolio-properties"><i class="fa fa-check"></i><b>4.2</b> Risk-based portfolio properties</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="rbportch.html"><a href="rbportch.html#code-to-find-portfolios"><i class="fa fa-check"></i><b>4.2.1</b> Code to find portfolios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="estriskreduce.html"><a href="estriskreduce.html"><i class="fa fa-check"></i><b>5</b> Estimation risk reduction techniques</a>
<ul>
<li class="chapter" data-level="5.1" data-path="estriskreduce.html"><a href="estriskreduce.html#improving-optimisation-inputs"><i class="fa fa-check"></i><b>5.1</b> Improving optimisation inputs</a></li>
<li class="chapter" data-level="5.2" data-path="estriskreduce.html"><a href="estriskreduce.html#penalising-the-optimization"><i class="fa fa-check"></i><b>5.2</b> Penalising the optimization</a></li>
<li class="chapter" data-level="5.3" data-path="estriskreduce.html"><a href="estriskreduce.html#alternate-implementation-methods"><i class="fa fa-check"></i><b>5.3</b> Alternate implementation methods</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="somemaths.html"><a href="somemaths.html"><i class="fa fa-check"></i><b>6</b> Using estimation risk reduction techniques</a>
<ul>
<li class="chapter" data-level="6.1" data-path="somemaths.html"><a href="somemaths.html#quantile-factor-modelling-and-regime-switching"><i class="fa fa-check"></i><b>6.1</b> Quantile factor modelling and regime switching</a></li>
<li class="chapter" data-level="6.2" data-path="somemaths.html"><a href="somemaths.html#ridge-regression"><i class="fa fa-check"></i><b>6.2</b> Ridge regression</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="experiment.html"><a href="experiment.html"><i class="fa fa-check"></i><b>7</b> An empirical test using Sourth African equities</a>
<ul>
<li class="chapter" data-level="7.1" data-path="experiment.html"><a href="experiment.html#data-and-methodology"><i class="fa fa-check"></i><b>7.1</b> Data and methodology</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="experiment.html"><a href="experiment.html#code-to-clean-incoming-data"><i class="fa fa-check"></i><b>7.1.1</b> Code to clean incoming data</a></li>
<li class="chapter" data-level="7.1.2" data-path="experiment.html"><a href="experiment.html#comments-on-data"><i class="fa fa-check"></i><b>7.1.2</b> Comments on data</a></li>
<li class="chapter" data-level="7.1.3" data-path="experiment.html"><a href="experiment.html#data-preparation-for-rebalance-dats"><i class="fa fa-check"></i><b>7.1.3</b> Data preparation for rebalance dats</a></li>
<li class="chapter" data-level="7.1.4" data-path="experiment.html"><a href="experiment.html#limitations"><i class="fa fa-check"></i><b>7.1.4</b> Limitations</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="experiment.html"><a href="experiment.html#results"><i class="fa fa-check"></i><b>7.2</b> Results</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="experiment.html"><a href="experiment.html#going-to-rify"><i class="fa fa-check"></i><b>7.2.1</b> going to R’ify</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>8</b> Conclusion</a>
<ul>
<li class="chapter" data-level="8.1" data-path="conclusion.html"><a href="conclusion.html#avenues-for-further-research"><i class="fa fa-check"></i><b>8.1</b> Avenues for further research</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="abbreviations.html"><a href="abbreviations.html"><i class="fa fa-check"></i><b>A</b> Abbreviations</a></li>
<li class="chapter" data-level="B" data-path="portfolio-mathematics.html"><a href="portfolio-mathematics.html"><i class="fa fa-check"></i><b>B</b> Portfolio mathematics</a>
<ul>
<li class="chapter" data-level="B.1" data-path="portfolio-mathematics.html"><a href="portfolio-mathematics.html#mrcapp"><i class="fa fa-check"></i><b>B.1</b> Marginal risk contribution</a></li>
<li class="chapter" data-level="B.2" data-path="portfolio-mathematics.html"><a href="portfolio-mathematics.html#ihimax"><i class="fa fa-check"></i><b>B.2</b> Minimum weight constrained IHI</a></li>
<li class="chapter" data-level="B.3" data-path="portfolio-mathematics.html"><a href="portfolio-mathematics.html#volineq"><i class="fa fa-check"></i><b>B.3</b> Proof of the volatility order inequality</a></li>
<li class="chapter" data-level="B.4" data-path="portfolio-mathematics.html"><a href="portfolio-mathematics.html#msrrbport"><i class="fa fa-check"></i><b>B.4</b> Maximum Sharpe ratio risk-based portfolios</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="reducing-estimation-error.html"><a href="reducing-estimation-error.html"><i class="fa fa-check"></i><b>C</b> Reducing estimation error</a>
<ul>
<li class="chapter" data-level="C.1" data-path="reducing-estimation-error.html"><a href="reducing-estimation-error.html#qfmexample"><i class="fa fa-check"></i><b>C.1</b> Quantile factor modelling example</a></li>
<li class="chapter" data-level="C.2" data-path="reducing-estimation-error.html"><a href="reducing-estimation-error.html#etaest"><i class="fa fa-check"></i><b>C.2</b> Estimating the ERC portfolio Lagrangian multiplier</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Flexible risk-based portfolio optimisation
<a href="https://github.com/jhlandman/flex_rb_opt"><em>(Github link)</em></a></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="reducing-estimation-error" class="section level1" number="11">
<h1><span class="header-section-number">C</span> Reducing estimation error</h1>
<div id="qfmexample" class="section level2" number="11.1">
<h2><span class="header-section-number">C.1</span> Quantile factor modelling example</h2>
<p>Consider the QFM (from equation <a href="estriskreduce.html#eq:qfm">(5.2)</a>) with two factors, the market risk factor <span class="math inline">\(R_m\)</span> and the
squares of that factor as an additional factor <span class="math inline">\(R_m^2\)</span>. The factor loadings can be estimated by a
procedure outlined by <span class="citation">Koenker and Bassett Jr (<a href="#ref-KB78" role="doc-biblioref">1978</a>)</span>. Once the quantile errors have been deduced, the quantile factor
sensitivities have been estimated, and the error quantiles set to the median quantile as in the main
text the following quantile prediction model can be used:
<span class="math display">\[\begin{align}
\hat{\mathcal{Q}}(\tau) = \hat{\alpha} (\tau) + \hat{\beta}_1^\intercal(\tau)R_m + \hat{\beta}_2^\intercal(\tau)R_m^2 + \epsilon_t(0.5),
\end{align}\]</span>
which yields <span class="math inline">\(|\tau|\)</span> sample covariance matrices <span class="math inline">\(\hat{\Sigma}^{(\tau)}\)</span>.</p>
</div>
<div id="etaest" class="section level2" number="11.2">
<h2><span class="header-section-number">C.2</span> Estimating the ERC portfolio Lagrangian multiplier</h2>
<p>We want to choose a value of <span class="math inline">\(\eta\)</span> that minimises all of the distances between the total risk
contributions so that they are minimised, but this should be done across all <span class="math inline">\(K\)</span> folds using
cross-validation. The general optimisation is the same as before:
<span class="math display">\[\begin{align}
\eta^* = \underset{\eta}{\text{argmin}} \Big \{ \frac{1}{K} \sum_{k = 1}^K \hat{h}_k^{erc}(\eta, \mathcal{I}_k, \mathcal{I}_{-k})\Big \}.
\end{align}\]</span>
The procedure of estimating <span class="math inline">\(h\)</span> still needs to be specified. The function <span class="math inline">\(f(\cdot|\textbf{X})\)</span> used
to find the ERC portfolio can be used as a distance to minimise. Hence:
<span class="math display">\[\begin{align}
h_k^{erc}(\eta, \mathcal{I}_k, \mathcal{I}_{-k}) = \sum_{i = 1}^N  \sum_{j \geq i}^N(w_{i, \mathcal{I}_{-k}}(\Sigma_{\mathcal{I}_k} w_{\mathcal{I}_{-k}})_i - w_{j, \mathcal{I}_{-k}}(\Sigma_{\mathcal{I}_k} w_{\mathcal{I}_{-k}})_j )^2,
\end{align}\]</span>
where <span class="math inline">\(w\)</span> and <span class="math inline">\(\Sigma\)</span> can be replaced by their sample estimations to find <span class="math inline">\(\hat{h}\)</span> given in the
main text.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-KB78">
<p>Koenker, Roger, and Gilbert Bassett Jr. 1978. “Regression Quantiles.” <em>Econometrica: Journal of the Econometric Society</em>, 33–50.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="portfolio-mathematics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
